tests:
  - interval: 1m
    input_series:
      - series: 'atlas_jobs_started_total{}'
        values: '0 5 10 15 20 25 30 35 40 45'
      - series: 'atlas_jobs_failed_total{}'
        values: '0 1 2 3 4 5 6 7 8 9'
    alert_rule_files:
      - observability/prometheus/alerts.yml
    eval_time: 10m
    exp_alerts:
      - exp_name: AtlasJobFailureRateHigh
        exp_labels:
          severity: warning
        exp_annotations:
          summary: Atlas job failure rate above 5%
  - interval: 1m
    input_series:
      - series: 'universal_verifier_requests_total{credential_format="jwt-vc"}'
        values: '0 50 100 150 200 250 300 350 400 450'
      - series: 'universal_verifier_failed_requests_total{credential_format="jwt-vc"}'
        values: '0 5 10 20 30 40 50 60 70 80'
      - series: 'universal_verifier_verification_duration_seconds_bucket{le="0.75"}'
        values: '0 45 90 135 180 225 270 315 360 405'
      - series: 'universal_verifier_verification_duration_seconds_bucket{le="+Inf"}'
        values: '0 50 100 150 200 250 300 350 400 450'
    alert_rule_files:
      - observability/prometheus/alerts.yml
    eval_time: 6m
    exp_alerts:
      - exp_name: UniversalVerifierErrorRateHigh
        exp_labels:
          severity: warning
      - exp_name: UniversalVerifierLatencySLO
        exp_labels:
          severity: critical
